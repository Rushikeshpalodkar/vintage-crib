<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>eBay Listing Helper - No API Required</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .header p {
            color: #666;
            font-size: 1.2rem;
        }

        .main-section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 3rem;
            gap: 2rem;
        }

        .step {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            background: #f8f9fa;
            color: #666;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .step.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            transform: scale(1.1);
        }

        .step.completed {
            background: #28a745;
            color: white;
        }

        /* Photo Upload Section */
        .upload-section {
            margin-bottom: 3rem;
        }

        .upload-zone {
            border: 3px dashed #667eea;
            border-radius: 20px;
            padding: 4rem 2rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(102, 126, 234, 0.05);
            position: relative;
        }

        .upload-zone:hover {
            border-color: #764ba2;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-5px);
        }

        .upload-zone.dragover {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .upload-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
            display: block;
        }

        .upload-zone h3 {
            font-size: 1.8rem;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .upload-zone p {
            color: #666;
            font-size: 1.1rem;
        }

        .file-info {
            font-size: 0.9rem;
            color: #999;
            margin-top: 1rem;
        }

        /* Photo Grid */
        .photo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .photo-item {
            position: relative;
            aspect-ratio: 1;
            border-radius: 15px;
            overflow: hidden;
            border: 3px solid #e0e0e0;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .photo-item:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .photo-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 0, 0, 0.9);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .photo-remove:hover {
            background: #ff0000;
            transform: scale(1.1);
        }

        .photo-order {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(102, 126, 234, 0.9);
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        /* Form Section */
        .form-section {
            display: none;
            margin-top: 3rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            color: #333;
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            padding: 1rem 1.5rem;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #fff;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            transform: scale(1.02);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .price-input {
            position: relative;
        }

        .price-input::before {
            content: '$';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: #666;
            z-index: 1;
        }

        .price-input input {
            padding-left: 2.5rem;
        }

        /* Action Section */
        .action-section {
            display: none;
            text-align: center;
            margin-top: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 20px;
            border: 2px solid #667eea;
        }

        .action-section h3 {
            color: #333;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .listing-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .option-card {
            background: linear-gradient(135deg, #fff, #f8f9fa);
            padding: 2rem;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid transparent;
            text-align: left;
        }

        .option-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .option-card.selected {
            border-color: #667eea;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        }

        .option-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }

        .option-card h4 {
            color: #333;
            margin-bottom: 0.8rem;
            font-size: 1.3rem;
        }

        .option-card p {
            color: #666;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        .option-features {
            list-style: none;
            color: #28a745;
            font-size: 0.9rem;
        }

        .option-features li {
            padding: 0.2rem 0;
        }

        .option-features li::before {
            content: '‚úÖ ';
            margin-right: 0.5rem;
        }

        /* Buttons */
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 1.2rem 2.5rem;
            border-radius: 15px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            margin: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
        }

        .btn.secondary {
            background: linear-gradient(45deg, #6c757d, #5a6268);
        }

        .btn.success {
            background: linear-gradient(45deg, #28a745, #20c997);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Status Messages */
        .status-message {
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1.5rem 0;
            font-weight: bold;
            text-align: center;
            display: none;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid #c3e6cb;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid #f5c6cb;
        }

        .status-message.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 2px solid #bee5eb;
        }

        /* Helper Instructions */
        .helper-instructions {
            display: none;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
            padding: 2rem;
            border-radius: 15px;
            margin-top: 2rem;
            border: 2px solid #2196f3;
        }

        .helper-instructions h4 {
            color: #0d47a1;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .helper-instructions ol {
            color: #1565c0;
            line-height: 2;
            margin-left: 1.5rem;
        }

        .helper-instructions li {
            margin-bottom: 0.5rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }

            .header h1 {
                font-size: 2rem;
            }

            .step-indicator {
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .listing-options {
                grid-template-columns: 1fr;
            }

            .photo-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
        }

        /* Animation */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        /* Hidden element */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üè™ eBay Listing Helper</h1>
            <p>Upload photos, add details, and let eBay's AI do the rest!</p>
        </div>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" id="step1">
                <span>üì∏</span>
                <span>Upload Photos</span>
            </div>
            <div class="step" id="step2">
                <span>üìù</span>
                <span>Add Details</span>
            </div>
            <div class="step" id="step3">
                <span>üöÄ</span>
                <span>List on eBay</span>
            </div>
        </div>

        <!-- Main Section -->
        <div class="main-section">
            <!-- Step 1: Photo Upload -->
            <div class="upload-section" id="uploadSection">
                <h2 style="text-align: center; margin-bottom: 2rem; color: #333;">
                    üì∏ Upload Your Product Photos
                </h2>
                
                <div class="upload-zone" id="uploadZone">
                    <span class="upload-icon">üì∑</span>
                    <h3>Drag & Drop Photos Here</h3>
                    <p>or click to browse your files</p>
                    <div class="file-info">
                        Supports: JPG, PNG, HEIC ‚Ä¢ Maximum 12 photos ‚Ä¢ Recommended: 1000x1000px or higher
                    </div>
                </div>
                
                <input type="file" id="fileInput" multiple accept="image/*" class="hidden">
                
                <div id="photoGrid" class="photo-grid"></div>
            </div>

            <!-- Step 2: Item Details Form -->
            <div class="form-section" id="formSection">
                <h2 style="text-align: center; margin-bottom: 2rem; color: #333;">
                    üìù Add Item Details
                </h2>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label for="itemTitle">Item Title (Optional)</label>
                        <input type="text" id="itemTitle" placeholder="eBay AI will auto-generate this">
                    </div>
                    
                    <div class="form-group">
                        <label for="itemCondition">Condition *</label>
                        <select id="itemCondition" required>
                            <option value="">Select condition</option>
                            <option value="new">New with tags</option>
                            <option value="new-other">New without tags</option>    
                            <option value="preowned-excellent">Pre-owned - Excellent</option>
                            <option value="preowned-good">Pre-owned - Good</option>
                            <option value="preowned-fair">Pre-owned - Fair</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="itemBrand">Brand</label>
                        <input type="text" id="itemBrand" placeholder="Nike, Adidas, H&M, etc.">
                    </div>
                    
                    <div class="form-group">
                        <label for="itemSize">Size</label>
                        <input type="text" id="itemSize" placeholder="S, M, L, XL, 32, 10, etc.">
                    </div>
                    
                    <div class="form-group price-input">
                        <label for="startingPrice">Starting Price *</label>
                        <input type="number" id="startingPrice" min="0.99" step="0.01" placeholder="9.99" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="shippingCost">Shipping Cost</label>
                        <select id="shippingCost">
                            <option value="free">Free shipping</option>
                            <option value="calculated">Calculated shipping</option>
                            <option value="flat">Flat rate ($5.99)</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="itemNotes">Additional Notes (Optional)</label>
                    <textarea id="itemNotes" placeholder="Any specific details about condition, measurements, etc. eBay AI will help with the main description."></textarea>
                </div>
                
                <div style="text-align: center; margin-top: 2rem;">
                    <button class="btn" onclick="proceedToListing()">
                        ‚úÖ Continue to eBay Listing
                    </button>
                </div>
            </div>

            <!-- Step 3: Listing Options -->
            <div class="action-section" id="actionSection">
                <h3>üöÄ Ready to List on eBay!</h3>
                <p style="color: #666; margin-bottom: 2rem;">
                    Choose how you'd like to complete your listing:
                </p>
                
                <div class="listing-options">
                    <div class="option-card" onclick="selectOption('instant')" data-option="instant">
                        <span class="option-icon">‚ö°</span>
                        <h4>Instant Helper</h4>
                        <p>Open eBay with your photos ready to drag & drop. eBay's AI will auto-fill everything!</p>
                        <ul class="option-features">
                            <li>Photos auto-download</li>
                            <li>eBay opens automatically</li>
                            <li>AI fills title & description</li>
                            <li>Fastest method</li>
                        </ul>
                    </div>
                    
                    <div class="option-card" onclick="selectOption('guided')" data-option="guided">
                        <span class="option-icon">üéØ</span>
                        <h4>Guided Process</h4>
                        <p>Step-by-step instructions with your data pre-filled for manual entry.</p>
                        <ul class="option-features">
                            <li>Detailed instructions</li>
                            <li>Pre-filled data sheet</li>
                            <li>Maximum control</li>
                            <li>Beginner friendly</li>
                        </ul>
                    </div>
                    
                    <div class="option-card" onclick="selectOption('save')" data-option="save">
                        <span class="option-icon">üíæ</span>
                        <h4>Save for Later</h4>
                        <p>Save this listing package to your browser for listing later.</p>
                        <ul class="option-features">
                            <li>Store locally</li>
                            <li>List when convenient</li>
                            <li>Multiple items queue</li>
                            <li>No rush</li>
                        </ul>
                    </div>
                </div>
                
                <div style="margin-top: 2rem;">
                    <button class="btn success" id="executeButton" onclick="executeListing()" disabled>
                        üöÄ Start eBay Listing Process
                    </button>
                    <button class="btn secondary" onclick="goBackToForm()">
                        ‚Üê Edit Details
                    </button>
                </div>
            </div>
        </div>

        <!-- Status Messages -->
        <div id="statusMessage" class="status-message"></div>

        <!-- Helper Instructions -->
        <div id="helperInstructions" class="helper-instructions">
            <h4>üìã eBay Listing Instructions:</h4>
            <ol id="instructionsList">
                <!-- Instructions will be populated by JavaScript -->
            </ol>
        </div>
    </div>

    <script>
        // Global variables
        let selectedPhotos = [];
        let currentStep = 1;
        let selectedOption = null;
        let listingData = {};

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            initializeUpload();
            loadSavedData();
        });

        // Initialize photo upload functionality
        function initializeUpload() {
            const uploadZone = document.getElementById('uploadZone');
            const fileInput = document.getElementById('fileInput');

            // Click to upload
            uploadZone.addEventListener('click', () => {
                fileInput.click();
            });

            // File input change
            fileInput.addEventListener('change', (e) => {
                handleFiles(Array.from(e.target.files));
            });

            // Drag and drop
            uploadZone.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadZone.classList.add('dragover');
            });

            uploadZone.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
            });

            uploadZone.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadZone.classList.remove('dragover');
                const files = Array.from(e.dataTransfer.files);
                handleFiles(files.filter(file => file.type.startsWith('image/')));
            });
        }

        // Handle selected files
        function handleFiles(files) {
            if (selectedPhotos.length + files.length > 12) {
                showStatus('Maximum 12 photos allowed!', 'error');
                return;
            }

            files.forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        selectedPhotos.push({
                            file: file,
                            url: e.target.result,
                            name: file.name
                        });
                        updatePhotoGrid();
                        
                        if (selectedPhotos.length >= 1) {
                            showFormSection();
                        }
                    };
                    reader.readAsDataURL(file);
                }
            });
        }

        // Update photo grid display
        function updatePhotoGrid() {
            const grid = document.getElementById('photoGrid');
            grid.innerHTML = selectedPhotos.map((photo, index) => `
                <div class="photo-item fade-in">
                    <div class="photo-order">${index + 1}</div>
                    <img src="${photo.url}" alt="${photo.name}">
                    <button class="photo-remove" onclick="removePhoto(${index})">√ó</button>
                </div>
            `).join('');
        }

        // Remove photo
        function removePhoto(index) {
            selectedPhotos.splice(index, 1);
            updatePhotoGrid();
            
            if (selectedPhotos.length === 0) {
                hideFormSection();
            }
        }

        // Show form section
        function showFormSection() {
            document.getElementById('formSection').style.display = 'block';
            document.getElementById('formSection').classList.add('fade-in');
            updateStepIndicator(2);
        }

        // Hide form section
        function hideFormSection() {
            document.getElementById('formSection').style.display = 'none';
            updateStepIndicator(1);
        }

        // Proceed to listing section
        function proceedToListing() {
            // Validate required fields
            const condition = document.getElementById('itemCondition').value;
            const price = document.getElementById('startingPrice').value;

            if (!condition || !price || price < 0.99) {
                showStatus('Please fill in condition and starting price (minimum $0.99)', 'error');
                return;
            }

            // Collect all form data
            collectListingData();
            
            // Show action section
            document.getElementById('actionSection').style.display = 'block';
            document.getElementById('actionSection').classList.add('fade-in');
            updateStepIndicator(3);
            
            // Scroll to action section
            document.getElementById('actionSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Collect listing data from form
        function collectListingData() {
            listingData = {
                photos: selectedPhotos,
                title: document.getElementById('itemTitle').value,
                condition: document.getElementById('itemCondition').value,
                brand: document.getElementById('itemBrand').value,
                size: document.getElementById('itemSize').value,
                startingPrice: document.getElementById('startingPrice').value,
                shipping: document.getElementById('shippingCost').value,
                notes: document.getElementById('itemNotes').value,
                timestamp: new Date().toISOString()
            };
        }

        // Select listing option
        function selectOption(option) {
            selectedOption = option;
            
            // Update UI
            document.querySelectorAll('.option-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelector(`[data-option="${option}"]`).classList.add('selected');
            
            // Enable execute button
            document.getElementById('executeButton').disabled = false;
            
            // Update button text
            const button = document.getElementById('executeButton');
            switch(option) {
                case 'instant':
                    button.innerHTML = '‚ö° Open eBay with Auto-Helper';
                    break;
                case 'guided':
                    button.innerHTML = 'üéØ Show Guided Instructions';
                    break;
                case 'save':
                    button.innerHTML = 'üíæ Save Listing Package';
                    break;
            }
        }

        // Execute the selected listing method
        function executeListing() {
            if (!selectedOption) {
                showStatus('Please select a listing method', 'error');
                return;
            }

            switch(selectedOption) {
                case 'instant':
                    executeInstantListing();
                    break;
                case 'guided':
                    executeGuidedListing();
                    break;
                case 'save':
                    executeSaveLater();
                    break;
            }
        }

        // Instant listing with auto-helper
        function executeInstantListing() {
            showStatus('üöÄ Preparing your photos and opening eBay...', 'info');
            
            // Download photos automatically
            downloadPhotos();
            
            // Wait a moment for downloads to start
            setTimeout(() => {
                // Open eBay
                window.open('https://www.ebay.com/sl/sell', '_blank');
                
                // Show instructions
                showInstantInstructions();
                
                showStatus('‚úÖ eBay opened! Your photos are downloading. Follow the instructions below.', 'success');
            }, 1000);
        }

        // Guided listing process
        function executeGuidedListing() {
            showGuidedInstructions();
            showStatus('üìã Detailed instructions are now displayed below.', 'info');
        }

        // Save for later functionality
        function executeSaveLater() {
            const savedListings = JSON.parse(localStorage.getItem('savedListings') || '[]');
            savedListings.push({
                id: Date.now(),
                ...listingData
            });
            localStorage.setItem('savedListings', JSON.stringify(savedListings));
            
            showStatus('üíæ Listing saved successfully! You can access it anytime from this browser.', 'success');
            
            // Show saved listings count
            setTimeout(() => {
                showStatus(`üì¶ You have ${savedListings.length} saved listings total.`, 'info');
            }, 2000);
        }

        // Download photos function
        function downloadPhotos() {
            selectedPhotos.forEach((photo, index) => {
                const link = document.createElement('a');
                link.href = photo.url;
                link.download = `ebay-photo-${index + 1}-${photo.name}`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });
        }

        // Show instant listing instructions
        function showInstantInstructions() {
            const instructions = [
                'Your photos are downloading to your Downloads folder',
                'eBay is now open in a new tab - go to that tab',
                'On eBay, find the "Add photos" or "Upload photos" section',
                'Drag all your downloaded photos into the eBay photo upload area',
                'eBay\'s AI will automatically analyze your photos and suggest:',
                '  ‚Ä¢ Item title (you can edit this)',
                '  ‚Ä¢ Item description (very detailed!)',
                '  ‚Ä¢ Category and item specifics',
                `Set your condition to: ${listingData.condition}`,
                `Set your starting price to: $${listingData.startingPrice}`,
                `${listingData.size ? `Add size: ${listingData.size}` : 'Add size if applicable'}`,
                `${listingData.brand ? `Confirm brand: ${listingData.brand}` : 'Add brand if needed'}`,
                `${listingData.notes ? `Additional notes: ${listingData.notes}` : ''}`,
                'Review all the AI-generated content',
                'Click "List Item" when everything looks good!'
            ].filter(instruction => instruction.trim() !== '');
            
            displayInstructions(instructions);
        }

        // Show guided listing instructions
        function showGuidedInstructions() {
            const instructions = [
                'Open eBay.com and click "Sell" or go to ebay.com/sl/sell',
                'Click "List an item" to start creating your listing',
                'Upload your photos by dragging them from your computer',
                'Wait for eBay\'s AI to analyze your photos (this may take 30-60 seconds)',
                'eBay will auto-suggest a title - you can edit it or use this one:',
                `  Suggested: "${listingData.title || 'Let eBay AI suggest the title'}"`,
                'eBay will write a detailed description automatically',
                'Select your category (eBay usually gets this right)',
                'Fill in the item specifics:',
                `  ‚Ä¢ Condition: ${listingData.condition}`,
                `  ‚Ä¢ Brand: ${listingData.brand || 'Add if known'}`,
                `  ‚Ä¢ Size: ${listingData.size || 'Add if applicable'}`,
                'Set your selling format to "Auction" or "Buy It Now"',
                `Set your starting price to: ${listingData.startingPrice}`,
                `Shipping: ${listingData.shipping === 'free' ? 'Offer free shipping' : 'Set calculated shipping'}`,
                `${listingData.notes ? `Add these notes to description: ${listingData.notes}` : ''}`,
                'Review everything and click "List Item"',
                'Your item will be live on eBay within a few minutes!'
            ];
            
            displayInstructions(instructions);
        }

        // Display instructions in the helper section
        function displayInstructions(instructions) {
            const instructionsList = document.getElementById('instructionsList');
            instructionsList.innerHTML = instructions.map(instruction => `<li>${instruction}</li>`).join('');
            
            document.getElementById('helperInstructions').style.display = 'block';
            document.getElementById('helperInstructions').classList.add('fade-in');
            
            // Scroll to instructions
            document.getElementById('helperInstructions').scrollIntoView({ behavior: 'smooth' });
        }

        // Go back to form editing
        function goBackToForm() {
            document.getElementById('actionSection').style.display = 'none';
            updateStepIndicator(2);
            document.getElementById('formSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Update step indicator
        function updateStepIndicator(step) {
            currentStep = step;
            
            // Reset all steps
            document.querySelectorAll('.step').forEach(stepEl => {
                stepEl.classList.remove('active', 'completed');
            });
            
            // Set completed steps
            for (let i = 1; i < step; i++) {
                document.getElementById(`step${i}`).classList.add('completed');
            }
            
            // Set active step
            document.getElementById(`step${step}`).classList.add('active');
        }

        // Show status message
        function showStatus(message, type) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.className = `status-message ${type}`;
            statusEl.innerHTML = message;
            statusEl.style.display = 'block';
            
            // Auto-hide after 5 seconds for success/info messages
            if (type === 'success' || type === 'info') {
                setTimeout(() => {
                    statusEl.style.display = 'none';
                }, 5000);
            }
            
            // Scroll status into view
            statusEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Load saved data from localStorage
        function loadSavedData() {
            const savedListings = JSON.parse(localStorage.getItem('savedListings') || '[]');
            if (savedListings.length > 0) {
                console.log(`Found ${savedListings.length} saved listings`);
                // You could add a button to load saved listings here
            }
        }

        // Utility functions
        function resetForm() {
            selectedPhotos = [];
            selectedOption = null;
            listingData = {};
            currentStep = 1;
            
            // Reset UI
            document.getElementById('photoGrid').innerHTML = '';
            document.getElementById('formSection').style.display = 'none';
            document.getElementById('actionSection').style.display = 'none';
            document.getElementById('helperInstructions').style.display = 'none';
            document.getElementById('statusMessage').style.display = 'none';
            
            // Reset form inputs
            document.getElementById('itemTitle').value = '';
            document.getElementById('itemCondition').value = '';
            document.getElementById('itemBrand').value = '';
            document.getElementById('itemSize').value = '';
            document.getElementById('startingPrice').value = '';
            document.getElementById('shippingCost').value = 'free';
            document.getElementById('itemNotes').value = '';
            
            // Reset file input
            document.getElementById('fileInput').value = '';
            
            updateStepIndicator(1);
        }

        // Add reset button functionality (you can add this button to HTML if needed)
        function addResetButton() {
            const resetBtn = document.createElement('button');
            resetBtn.className = 'btn secondary';
            resetBtn.innerHTML = 'üîÑ Start Over';
            resetBtn.onclick = resetForm;
            resetBtn.style.position = 'fixed';
            resetBtn.style.bottom = '20px';
            resetBtn.style.right = '20px';
            resetBtn.style.zIndex = '1000';
            document.body.appendChild(resetBtn);
        }

        // Initialize reset button
        addResetButton();

        // Handle page visibility for better UX
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible' && selectedPhotos.length > 0) {
                // User came back to tab, maybe they finished listing
                console.log('User returned to tab');
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            // Ctrl/Cmd + U to upload photos
            if ((e.ctrlKey || e.metaKey) && e.key === 'u') {
                e.preventDefault();
                document.getElementById('fileInput').click();
            }
            
            // Escape to go back
            if (e.key === 'Escape') {
                if (currentStep === 3) {
                    goBackToForm();
                } else if (currentStep === 2 && selectedPhotos.length === 0) {
                    updateStepIndicator(1);
                }
            }
        });

        // Photo optimization function (optional)
        function optimizePhoto(file, callback) {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            const img = new Image();
            
            img.onload = function() {
                // Resize if image is too large
                const maxSize = 1200;
                let { width, height } = img;
                
                if (width > maxSize || height > maxSize) {
                    if (width > height) {
                        height = (height * maxSize) / width;
                        width = maxSize;
                    } else {
                        width = (width * maxSize) / height;
                        height = maxSize;
                    }
                }
                
                canvas.width = width;
                canvas.height = height;
                
                ctx.drawImage(img, 0, 0, width, height);
                
                canvas.toBlob(callback, 'image/jpeg', 0.9);
            };
            
            img.src = URL.createObjectURL(file);
        }

        // Advanced feature: Bulk listing preparation
        function prepareBulkListing() {
            const bulkData = {
                photos: selectedPhotos,
                template: listingData,
                variations: []
            };
            
            // This could be expanded for multiple size/color variations
            localStorage.setItem('bulkListingTemplate', JSON.stringify(bulkData));
            showStatus('üíæ Bulk listing template saved!', 'success');
        }

        // Export listing data (for advanced users)
        function exportListingData() {
            const exportData = {
                photos: selectedPhotos.map(p => p.name),
                details: listingData,
                exportDate: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'ebay-listing-data.json';
            link.click();
            URL.revokeObjectURL(url);
        }

        // Analytics (simple tracking)
        function trackUsage(action) {
            const analytics = JSON.parse(localStorage.getItem('ebayHelperAnalytics') || '{}');
            analytics[action] = (analytics[action] || 0) + 1;
            analytics.lastUsed = new Date().toISOString();
            localStorage.setItem('ebayHelperAnalytics', JSON.stringify(analytics));
        }

        // Track key actions
        document.addEventListener('DOMContentLoaded', () => trackUsage('pageLoad'));
        
        // You can call trackUsage('photoUpload'), trackUsage('listingCreated'), etc.
    </script>
</body>
</html>